# WDparams
WDparams is an open-source pipeline created by Nicole Crumpler to measure the radial velocities, spectroscopic surface gravities and temperatures, and photometric radii and temperatures of all DA white dwarf stars confidently identified in Data Releases (DRs) 1-16 of the Sloan Digital Sky Survey (SDSS) and in the upcoming SDSS DR 19.  The paper describing the pipeline, [“A Catalog of DA White Dwarf Characteristics using SDSS and Gaia Observations”](https://www.overleaf.com/read/fnbkbkbyrcvg#394d1e), has currently been submitted to the SDSS Compact Objects Working Group and will be published in Summer 2025 along with SDSS DR 19. When DR 19 is made public, the full catalog of all measured physical parameters of all SDSS DR 1-19 DA white dwarfs will be published on this site as an official SDSS Value Added Catalog, but for now that catalog is under the collaboration embargo. For each fitting procedure, I performed a variety of validations to uncover the best methodology for each fit, such as varying fit window sizes or which Balmer series lines to fit. This pipeline contains the best methods according to my findings, but users can easily modify it to their own preferences.

This very large catalog of spectroscopically-confirmed DA white dwarfs provides an incredible opportunity for the community to learn new things about these stars. As an example application, we include a series of notebooks showing how this data can be use to, for the first time in the published literature, detect the temperature dependence of the famous white dwarf mass-radius relation. This detection will be published imminently in a paper entitled [“Detection of the Temperature Dependence of the White Dwarf Mass-Radius Relation with Gravitational Redshifts”](https://www.overleaf.com/read/svpykmwhjbgd#cb4f64), accepted to ApJ.

If you wish to use any part of this work, please cite the “A Catalog of DA White Dwarf Characteristics using SDSS and Gaia Observations” and the “Detection of the Temperature Dependence of the White Dwarf Mass-Radius Relation with Gravitational Redshifts” papers as well as all relevant references contained within them.

# Pipeline Summary

- Notebook 00: Collects all SDSS-V Data Release 19 DA white dwarfs. This data is proprietary until the public release of Data Release 19 in Summer 2025. After the public release, users will be able to access the data on the SDSS Science Archive Server (SAS).
- Notebook 01: Cross matches all SDSS-V white dwarfs with other published data sets. These cross matched values are included in the complete catalog, which will be made publicly available at the time of DR 19. The links to access all comparison datasets are included in the notebook.
- Notebook 02: Collects all DA white dwarfs from DRs 1-16 using the results of [Gentile Fusillo et al. (2021)](https://ui.adsabs.harvard.edu/abs/2021MNRAS.508.3877G/abstract), and cross matches these objects with previously published SDSS white dwarf catalogs. These cross matched values are included in the complete catalog, which will be made publicly available at the time of DR 19. The links to access the [Gentile Fusillo et al. (2021)](https://ui.adsabs.harvard.edu/abs/2021MNRAS.508.3877G/abstract) and previous SDSS catalogs are included in the notebook.
- Notebook 03: Coadds all spectra for each white dwarf using a resampling routine, and measures the apparent radial velocity of each individual and coadded spectrum for each white dwarf. The radial velocity is measured via chi-square minimization using [Tremblay el al. (2013)](https://ui.adsabs.harvard.edu/abs/2013A%26A...559A.104T/abstract) [model spectra](https://warwick.ac.uk/fac/sci/physics/research/astro/people/tremblay/modelgrids/) through a modified version of the open source code Compact Objects Radial Velocities ([corv](https://github.com/vedantchandra/corv)). My modified version of this code is provided on the [corv_nicole](https://github.com/nicolecrumpler0230/corv_nicole) repository. This notebook includes many plots to characterize the systematic uncertainty in these fits by comparing my measurements to other published data sets.
- Notebook 04: Measures the spectroscopic surface gravity and temperature of each individual and coadded spectrum for each white dwarf. These are measured using a random forest routine that is trained on [Tremblay et al. (2019)](https://ui.adsabs.harvard.edu/abs/2019MNRAS.482.5222T/abstract) data to create a relation between a Voigt profile fit to each Balmer absorption line in the spectrum and the labeled surface gravity and temperature of the star. This routine is a modified version of the open source code [wdtools](https://wdtools.readthedocs.io/en/latest/), and the modified version of this code is provided on the [wdtools_nicole](https://github.com/nicolecrumpler0230/wdtools_nicole) repository. This notebook includes many plots to characterize the systematic uncertainty in these fits by comparing my measurements to other published data sets.
- Notebook 05: Corrects the SDSS and Gaia photometry of each white dwarf for extinction and then measures the photometric radius and temperature of each white dwarf. These are measured via chi-square minimization using [Tremblay el al. (2013)](https://ui.adsabs.harvard.edu/abs/2013A%26A...559A.104T/abstract) [model spectra](https://warwick.ac.uk/fac/sci/physics/research/astro/people/tremblay/modelgrids/) integrated over models of the SDSS and Gaia photometric filters to create model photometry. This notebook includes many plots to characterize the systematic uncertainty in these fits by comparing my measurements to other published data sets.
- Notebook 06: Calculates the masses of each white dwarf and corrects all measured radial velocities to the local standard of rest and for asymmetric drift. In this notebook, we create the final full catalogs which will be published as an official SDSS Value Added Catalog at the time of DR19. We then perform data quality cuts to obtain the sample used to detect the temperature dependence of the white dwarf mass-radius relation. We bin the sample in measured radius and surface gravity.
- Notebook 07:  Uses the sample binned in radius and surface gravity to measure the gravitational redshifts, and thus the masses, of the white dwarfs in the sample. We plot these redshifts and masses as a function of radius and surface gravity to obtain an empirical white dwarf mass-radius relation, and compare our results to the theoretical La Plata models. We divide the sample based on white dwarf temperature, and re-plot the mass radius relation for only cool and only warm stars. These initial mass-radius relations are not bias-corrected.
- Notebook 08: Performs a simulation to characterize the effect of the sharply peaked white dwarf radius/surface gravity distributions on our measured mass-radius relation. We implement these corrections and re-plot our empirical mass-radius relation, both for the full sample and the temperature-divided samples, against the theoretical La Plata models. Detect the temperature-dependence of the mass-radius relation.

# Directories

- csv: Contains all final tables from the “Detection of the Temperature Dependence of the White Dwarf Mass-Radius Relation with Gravitational Redshifts” paper. The full SDSS Value Added Catalogs will be published at the time of DR19.
- data: Contains the training data for my modified version of the wdtools random forest routine. Users can import the data from the comparison catalogs linked in Notebooks 01 and 02 to this directory if they  wish to perform their own cross matches.
- models: Contains the Tremblay el al. (2013) model spectra used in the fitting procedures of Notebooks 03 and 05.
- environments: Contains .yml files capable of setting up conda environments for various parts of the pipeline. Some of the packages used in this pipeline have deprecated or conflicting dependencies. Until I create my own updated versions, it is necessary to switch environments depending on which parts of the pipeline you wish to run. The corv_wd_models.yml file is used for Notebooks 00-03 and 06-08, and is set up to run both the [corv](https://github.com/vedantchandra/corv) and [WD_models](https://github.com/SihaoCheng/WD_models) packages. The wd_tools.yml file is used for Notebook 004, and is set up to run [wdtools](https://wdtools.readthedocs.io/en/latest/). The phot.yml file is used for Notebook 05, and is set up to run the [dustmaps](https://dustmaps.readthedocs.io/en/latest/index.html), [extinction](https://extinction.readthedocs.io/en/latest/), and [pyphot](https://mfouesneau.github.io/pyphot/#installation) packages.
